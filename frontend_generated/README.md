# iRiskAssist360 Frontend Integration Package

This package contains generated modules to connect the React Frontend with the Rating Engine Backend.

## ðŸ“‚ Directory Structure

Copy these folders into your frontend `src/` directory.

```
src/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ httpClient.ts      # Axios client with robust error handling
â”‚   â””â”€â”€ ratingApi.ts       # Rate calculation services & Types
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PremiumBreakdownCard.tsx  # Mobile-first Premium UI
â”‚   â”œâ”€â”€ SumInsuredBreakdownCard.tsx # SI Details UI
â”‚   â””â”€â”€ RateInfoCard.tsx          # Rate visibility UI
â””â”€â”€ services/
    â””â”€â”€ pdf/
        â””â”€â”€ policySummary.ts      # PDF Generator Service
```

## ðŸš€ Installation Dependencies

Ensure you have these installed:
```bash
npm install axios jspdf jspdf-autotable
```

## ðŸ›  Usage Guide

### 1. Configure Environment
In your `.env` file:
```bash
VITE_API_BASE_URL=https://web-production-afeec.up.railway.app
```

### 2. Implement Rating Logic (Example Page)

```tsx
import { useState } from 'react';
import { calculatePremium, RatingResponseData } from '../api/ratingApi';
import PremiumBreakdownCard from '../components/PremiumBreakdownCard';
import SumInsuredBreakdownCard from '../components/SumInsuredBreakdownCard';
import { generatePolicySummaryPDF } from '../services/pdf/policySummary';

const InsurancePage = () => {
    const [result, setResult] = useState<RatingResponseData | null>(null);

    const handleCalculate = async () => {
        try {
            const data = await calculatePremium({
                product_code: 'BGRP',
                policy_period_years: 10,
                buildingSI: 5000000,
                contentsSI: 1000000,
                terrorismCover: 'Yes'
            });
            setResult(data);
        } catch (err) {
            // Toast handling is done automatically in httpClient, 
            // but you can catch specific errors here too.
        }
    };

    const handleDownloadPDF = () => {
        if (!result) return;
        generatePolicySummaryPDF({
            customerName: "John Doe",
            address: "123, Jubilee Hills, Hyderabad",
            policyType: "Bharat Griha Raksha",
            occupancy: "Residential",
            periodYears: 10,
            siData: {
                building: 5000000,
                contents: 1000000,
                addons: {}
            },
            premiumData: result
        });
    };

    return (
        <div className="p-4">
            <button onClick={handleCalculate} className="btn-primary">Calculate Premium</button>
            
            {result && (
                <div className="mt-6">
                    <SumInsuredBreakdownCard 
                        buildingSI={5000000} 
                        contentsSI={1000000} 
                    />
                    
                    <PremiumBreakdownCard data={result} />
                    
                    <button onClick={handleDownloadPDF} className="mt-4 btn-secondary">
                        Download Quote PDF
                    </button>
                </div>
            )}
        </div>
    );
};
```

## ðŸŽ¨ Component Features
*   **PremiumBreakdownCard**: Automatically handles dynamic add-ons, displays base/net/gross clearly.
*   **PDF Generator**: Browser-side generation using `jsPDF`. No backend call needed for PDF.
*   **Error Handling**: `httpClient.ts` automatically retries 5xx errors and logs validation failures.

---
Generated by Antigravity Agent.
